---
title: "P8015_hw2_db3180"
author: "Divya Bisht"
date: "10/2/2018"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
```
## Problem 1

Importing NYC Transit data
```{r}
NYC_transport = read_csv("./NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>%
janitor::clean_names() %>% 
select(line, station_name, station_latitude, station_longitude, route1, route2, route3, route4, route5, route6, route7, route8, route9, route10, route11, entry, vending,       
       entrance_type, ada) %>%

mutate(entry = recode(entry, "YES" = TRUE, "NO" = FALSE))

NYC_transport
```

This dataset has 19 variables (line, station_name, station_latitude, station_longitude, route1, route2, route3, route4, route5, route6, route7, route8, route9, route10, route11, entry, vending, entrance_type, ada). The cleaning so far has included using the janitor function. There are 1868 rows and 19 columns. The data are tidy, but the route8 and route9 data are numeric variables while all the other route data are factor variables. 

Answer the following questions using these data:

How many distinct stations are there? Note that stations are identified both by name and by line (e.g. 125th St A/B/C/D; 125st 1; 125st 4/5); the distinct function may be useful here.

The number of distint stations are: `r nrow(distinct(NYC_transport, line, station_name))`

The number of stations that are ADA compliant are: `r nrow(distinct(NYC_transport, ada = TRUE))`

```{r}
prop_vend = 
(nrow(
  NYC_transport %>% 
  filter(entry == TRUE) %>%
  filter(vending == "NO")
)
  /
nrow(NYC_transport %>% 
  filter(vending == "NO")
))
```
The proportion of station entrances/exits without vending allow entrances is:
`r prop_vend`

Reformatting data
```{r}
NYC_tidy_transport = gather(NYC_transport, key = route_number, value = route_name, route1:route11)
```

Stations of the A train: 
```{r}
nrow(
  NYC_tidy_transport %>%
   distinct(line, station_name, route_name) %>% 
   filter(route_name == "A")
   )
```

Number of A train stations are ADA compliant
```{r}
nrow(
  NYC_tidy_transport %>%
   distinct(line, station_name, route_name, ada) %>% 
   filter(route_name == "A") %>%
   filter(ada == TRUE))
```


## Problem 2 
Import Mr. TrashWheel
```{r}
library(readxl)
trash_data = read_excel("./HealthyHarborWaterWheelTotals2018-7-28.xlsx", sheet =  "Mr. Trash Wheel", 
  range = "A2:N258") %>%
  janitor::clean_names() %>%
  filter(!is.na(dumpster)) %>%
  mutate(sports_balls = round(sports_balls)) %>%
  mutate(sports_balls = as.integer(sports_balls))
```

Precipitation data
```{r}
precip_data16 = read_excel("./HealthyHarborWaterWheelTotals2018-7-28.xlsx", 
    sheet = "2016 Precipitation", 
    range = "A2:B14") %>%
    janitor::clean_names() %>% 
    mutate(year = 2016)

precip_data17 = read_excel("./HealthyHarborWaterWheelTotals2018-7-28.xlsx", 
    sheet = "2017 Precipitation", 
    range = "A2:B14") %>%
    janitor::clean_names() %>% 
    filter(!is.na(total)) %>%
    mutate(year = 2017)

preci_combined = full_join(precip_data16, precip_data17) %>%
mutate(month = month.name[month])
```

The above data show precipitation per month in 2016 and 2017. October 2016 and 2017 had 


`r (precip_combined, total.xfilter(precip_combined, month == "October")` inches of rain, for example. 
The total precipitation for 2017 was `r`

The median number of sports balls in a dumpster in 2016 were: ``

##Problem 3
```{r}
devtools::install_github("p8105/p8105.datasets")

library(p8105.datasets)


brfss_data = brfss_smart2010 %>%
  janitor::clean_names() %>%
  filter(topic == "Overall Health") %>% 
  select(-class, -topic, -question, -sample_size, -(confidence_limit_low:geo_location)) %>%
  rename(state = locationabbr, county = locationdesc)
  
```



